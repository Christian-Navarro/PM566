<!DOCTYPE html>
<html lang="en-us" 
      xmlns:og="http://ogp.me/ns#" 
      xmlns:fb="https://www.facebook.com/2008/fbml">

<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="generator" content="Source Themes Academic 4.8.0">

  

  
  
  
  
  
    
    
    
  
  

  

  
  
  
    
  
  <meta name="description" content="# Set to TRUE if you want the blocks to be evaluated EVAL &lt;- FALSE ECHO &lt;- EVAL  Learning Goals  Read in and prepare the meteorological dataset Create several graphs with different geoms() in ggplot2 Create a facet graph Conduct some customizations to the graphs Create a more detailed map using leaflet()  Lab Description We will again work with the meteorological data presented in lecture.
The objective of the lab is to examine the association between weekly average dew point temperature and wind speed in four regions of the US and by elevation.">

  
  <link rel="alternate" hreflang="en-us" href="https://uscbiostats.github.io/PM566/assignment/04-lab/">

  


  
  
  
  <meta name="theme-color" content="#098A9C">
  

  
  
  
  <script src="/PM566/js/mathjax-config.js"></script>
  

  
  
  
  
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/academicons/1.8.6/css/academicons.min.css" integrity="sha256-uFVgMKfistnJAfoCUQigIl+JfUaP47GrRKjf6CTPVmw=" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.0-1/css/all.min.css" integrity="sha256-4w9DunooKSr3MFXHXWyFER38WmPdm361bQS/2KUWZbU=" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.css" integrity="sha256-Vzbj7sDDS/woiFS3uNKo8eIuni59rjyNGtXfstRzStA=" crossorigin="anonymous">

    
    
    
      
    
    
      
      
        
          <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/styles/github.min.css" crossorigin="anonymous" title="hl-light">
          <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/styles/dracula.min.css" crossorigin="anonymous" title="hl-dark" disabled>
        
      
    

    

    

    
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/lazysizes/5.1.2/lazysizes.min.js" integrity="sha256-Md1qLToewPeKjfAHU1zyPwOutccPAm5tahnaw7Osw0A=" crossorigin="anonymous" async></script>
      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js" integrity="" crossorigin="anonymous" async></script>
      
    
      

      
      

      
    

  

  
  
  
    
      
      
      <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,400i&display=swap">
    
  

  
  
  
  
  <link rel="stylesheet" href="/PM566/css/academic.css">

  




  


  
  

  

  <link rel="manifest" href="/PM566/index.webmanifest">
  <link rel="icon" type="image/png" href="/PM566/images/icon_hu0b7a4cb9992c9ac0e91bd28ffd38dd00_9727_32x32_fill_lanczos_center_3.png">
  <link rel="apple-touch-icon" type="image/png" href="/PM566/images/icon_hu0b7a4cb9992c9ac0e91bd28ffd38dd00_9727_192x192_fill_lanczos_center_3.png">

  <link rel="canonical" href="https://uscbiostats.github.io/PM566/assignment/04-lab/">

  
  
  
  
  
  
  
    
  
  
  <meta property="twitter:card" content="summary_large_image">
  
  <meta property="twitter:site" content="@USCBiostat">
  <meta property="twitter:creator" content="@USCBiostat">
  
  <meta property="og:site_name" content="Introduction to Health Data Science - PM 566">
  <meta property="og:url" content="https://uscbiostats.github.io/PM566/assignment/04-lab/">
  <meta property="og:title" content="Lab 04 - Data Visualization | Introduction to Health Data Science - PM 566">
  <meta property="og:description" content="# Set to TRUE if you want the blocks to be evaluated EVAL &lt;- FALSE ECHO &lt;- EVAL  Learning Goals  Read in and prepare the meteorological dataset Create several graphs with different geoms() in ggplot2 Create a facet graph Conduct some customizations to the graphs Create a more detailed map using leaflet()  Lab Description We will again work with the meteorological data presented in lecture.
The objective of the lab is to examine the association between weekly average dew point temperature and wind speed in four regions of the US and by elevation."><meta property="og:image" content="https://uscbiostats.github.io/PM566/img/social-image.png">
  <meta property="twitter:image" content="https://uscbiostats.github.io/PM566/img/social-image.png"><meta property="og:locale" content="en-us">
  
    
    
  

  



  


  


  <link rel="shortcut icon" href="https://uscbiostats.github.io/PM566/favicon.ico" />
  <link rel="apple-touch-icon-precomposed" sizes="57x57" href="https://uscbiostats.github.io/PM566/img/apple-touch-icon-57x57.png" />
  <link rel="apple-touch-icon-precomposed" sizes="114x114" href="https://uscbiostats.github.io/PM566/img/apple-touch-icon-114x114.png" />
  <link rel="apple-touch-icon-precomposed" sizes="72x72" href="https://uscbiostats.github.io/PM566/img/apple-touch-icon-72x72.png" />
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="https://uscbiostats.github.io/PM566/img/apple-touch-icon-144x144.png" />
  <link rel="apple-touch-icon-precomposed" sizes="120x120" href="https://uscbiostats.github.io/PM566/img/apple-touch-icon-120x120.png" />
  <link rel="apple-touch-icon-precomposed" sizes="152x152" href="https://uscbiostats.github.io/PM566/img/apple-touch-icon-152x152.png" />
  <link rel="icon" type="image/png" href="https://uscbiostats.github.io/PM566/img/favicon-32x32.png" sizes="32x32" />
  <link rel="icon" type="image/png" href="https://uscbiostats.github.io/PM566/img/favicon-16x16.png" sizes="16x16" />
  <meta name="application-name" content="PM566: Introduction to Health Data Science - PM 566" />
  <meta name="msapplication-TileColor" content="#FFFFFF" />
  <meta name="msapplication-TileImage" content="https://uscbiostats.github.io/PM566/img/mstile-144x144.png" />


  <title>Lab 04 - Data Visualization | Introduction to Health Data Science - PM 566</title>

</head>


<body id="top" data-spy="scroll" data-offset="70"
    data-target="#TableOfContents"
    >

    <aside class="search-results" id="search">
  <div class="container">
    <section class="search-header">

      <div class="row no-gutters justify-content-between mb-3">
        <div class="col-6">
          <h1>Search</h1>
        </div>
        <div class="col-6 col-search-close">
          <a class="js-search" href="#"><i class="fas fa-times-circle text-muted" aria-hidden="true"></i></a>
        </div>
      </div>

      <div id="search-box">
        
        
        
      </div>

    </section>
    <section class="section-search-results">

      <div id="search-hits">
        
      </div>

    </section>
  </div>
</aside>


    









<nav class="navbar navbar-expand-lg navbar-light compensate-for-scrollbar" id="navbar-main">
  <div class="container">

    
    <div class="d-none d-lg-inline-flex">
      <a class="navbar-brand" href="/PM566/">Introduction to Health Data Science - PM 566</a>
    </div>
    

    
    <button type="button" class="navbar-toggler" data-toggle="collapse"
            data-target="#navbar-content" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
    <span><i class="fas fa-bars"></i></span>
    </button>
    

    
    <div class="navbar-brand-mobile-wrapper d-inline-flex d-lg-none">
      <a class="navbar-brand" href="/PM566/">Introduction to Health Data Science - PM 566</a>
    </div>
    

    
    
    <div class="navbar-collapse main-menu-item collapse justify-content-end" id="navbar-content">

      
      <ul class="navbar-nav d-md-inline-flex">
        

        

        
        
        
          
        

        
        
        
        
        
        

        <li class="nav-item">
          <a class="nav-link " href="/PM566/syllabus/"><span>Syllabus</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        

        <li class="nav-item">
          <a class="nav-link " href="/PM566/schedule/"><span>Schedule</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        

        <li class="nav-item">
          <a class="nav-link " href="/PM566/reference/"><span>Reference</span></a>
        </li>

        
        

      

        
      </ul>
    </div>

    <ul class="nav-icons navbar-nav flex-row ml-auto d-flex pl-md-2">
      

      

      

    </ul>

  </div>
</nav>


    <article class="article">

  












  

  
  
  
<div class="article-container pt-3">
  <h1>Lab 04 - Data Visualization</h1>

  

  
    


<div class="article-metadata">

  
  

  
  <span class="article-date">
    
    
      
    
    January 1, 0001
  </span>
  

  

  

  
  
  

  
  

</div>

    














  
</div>



  <div class="article-container">

    <div class="article-style">
      <pre><code class="language-r"># Set to TRUE if you want the blocks to be evaluated 
EVAL &lt;- FALSE
ECHO &lt;- EVAL
</code></pre>
<h1 id="learning-goals">Learning Goals</h1>
<ul>
<li>Read in and prepare the meteorological dataset</li>
<li>Create several graphs with different <code>geoms()</code> in <code>ggplot2</code></li>
<li>Create a facet graph</li>
<li>Conduct some customizations to the graphs</li>
<li>Create a more detailed map using <code>leaflet()</code></li>
</ul>
<h1 id="lab-description">Lab Description</h1>
<p>We will again work with the meteorological data presented in lecture.</p>
<p><strong>The objective of the lab is to examine the association between weekly average dew point temperature and wind speed in four regions of the US and by elevation.</strong></p>
<h1 id="steps">Steps</h1>
<h3 id="1-read-in-the-data">1. Read in the data</h3>
<p>First download and then read in with data.table:fread()</p>
<pre><code class="language-r">if (!file.exists(&quot;met_all.gz&quot;))
  download.file(
    url = &quot;https://raw.githubusercontent.com/USCbiostats/data-science-data/master/02_met/met_all.gz&quot;,
    destfile = &quot;met_all.gz&quot;,
    method   = &quot;libcurl&quot;,
    timeout  = 60
    )
met &lt;- data.table::fread(&quot;met_all.gz&quot;)
</code></pre>
<h3 id="2-prepare-the-data">2. Prepare the data</h3>
<ul>
<li>Remove temperatures less than -17C</li>
<li>Make sure there are no missing data in the key variables coded as 9999, 999, etc</li>
<li>Generate a date variable using the functions <code>as.Date()</code> (hint: You will need the following to create a date <code>paste(year, month, day, sep = &quot;-&quot;)</code>).</li>
<li>Using the <code>data.table::week</code> function, keep the observations of the first week of the month.</li>
<li>Compute the mean by station of the variables <code>temp</code>, <code>rh</code>, <code>wind.sp</code>, <code>vis.dist</code>, <code>dew.point</code>, <code>lat</code>,
<code>lon</code>, and <code>elev</code>.</li>
<li>Create a region variable for NW, SW, NE, SE based on lon = -98.00 and lat = 39.71 degrees</li>
<li>Create a categorical variable for elevation as in the lecture slides</li>
</ul>
<h3 id="3-use-geom_violin-to-examine-the-wind-speed-and-dew-point-temperature-by-region">3. Use <code>geom_violin</code> to examine the wind speed and dew point temperature by region</h3>
<p>You saw how to use <code>geom_boxplot</code> in class. Try using <code>geom_violin</code> instead (take a look at the help).
(hint: You will need to set the <code>x</code> aesthetic to 1)</p>
<ul>
<li>Use facets</li>
<li>Make sure to deal with <code>NA</code> category</li>
<li>Describe what you observe in the graph</li>
</ul>
<h3 id="4-use-geom_jitter-with-stat_smooth-to-examine-the-association-between-dew-point-temperature-and-wind-speed-by-region">4. Use <code>geom_jitter</code> with <code>stat_smooth</code> to examine the association between dew point temperature and wind speed by region</h3>
<ul>
<li>Colour points by region</li>
<li>Make sure to deal with <code>NA</code> category</li>
<li>Fit a linear regression line by region</li>
<li>Describe what you observe in the graph</li>
</ul>
<h3 id="5-use-geom_bar-to-create-barplots-of-the-weather-stations-by-elevation-category-coloured-by-region">5. Use <code>geom_bar</code> to create barplots of the weather stations by elevation category coloured by region</h3>
<ul>
<li>Bars by elevation category using <code>position=&quot;dodge&quot;</code></li>
<li>Change colours from the default. Colour by region using <code>scale_fill_brewer</code> see 
<a href="http://rstudio-pubs-static.s3.amazonaws.com/5312_98fc1aba2d5740dd849a5ab797cc2c8d.html" target="_blank" rel="noopener">this</a></li>
<li>Create nice labels on axes and add a title</li>
<li>Describe what you observe in the graph</li>
<li>Make sure to deal with <code>NA</code></li>
</ul>
<h3 id="6-use-stat_summary-to-examine-mean-dew-point-and-wind-speed-by-region-with-standard-deviation-error-bars">6. Use <code>stat_summary</code> to examine mean dew point and wind speed by region with standard deviation error bars</h3>
<ul>
<li>
<p>Make sure to remove <code>NA</code></p>
</li>
<li>
<p>Use fun.data=&ldquo;mean_sdl&rdquo; in <code>stat_summary</code></p>
</li>
<li>
<p>Add another layer of <code>stats_summary</code> but change the geom to <code>&quot;errorbar&quot;</code> (see the help).</p>
</li>
<li>
<p>Describe the graph and what you observe</p>
</li>
<li>
<p>Dew point temperature is&hellip;</p>
</li>
<li>
<p>Wind speed is&hellip;</p>
</li>
</ul>
<h3 id="7-make-a-map-showing-the-spatial-trend-in-relative-h-in-the-us">7. Make a map showing the spatial trend in relative h in the US</h3>
<ul>
<li>
<p>Make sure to remove <code>NA</code></p>
</li>
<li>
<p>Use leaflet()</p>
</li>
<li>
<p>Make a colour palette with custom colours</p>
</li>
<li>
<p>Use <code>addMarkers</code> to include the top 10 places in relative h (hint: this will be useful <code>rank(-rh) &lt;= 10</code>)</p>
</li>
<li>
<p>Add a legend</p>
</li>
<li>
<p>Describe trend in RH across the US</p>
</li>
</ul>
<h3 id="8-use-a-ggplot-extension">8. Use a ggplot extension</h3>
<ul>
<li>Pick and extension (except cowplot) from 
<a href="https://exts.ggplot2.tidyverse.org/gallery/" target="_blank" rel="noopener">here</a> and make a plot of your choice using the met data (or met_avg)</li>
<li>Might want to try examples that come with the extension first (e.g. ggtech, gganimate, ggforce)</li>
</ul>

    </div>

    















  
  



  </div>
</article>

        

    
    
    
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.imagesloaded/4.1.4/imagesloaded.pkgd.min.js" integrity="sha256-lqvxZrPLtfffUl2G/e7szqSvPBILGbwmsGE1MKlOi0Q=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.isotope/3.0.6/isotope.pkgd.min.js" integrity="sha256-CBrpuqrMhXwcLLUd5tvQ4euBHCdh7wGlDfNz8vbu/iI=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.js" integrity="sha256-yt2kYMy0w8AbtF89WXb2P1rfjcP/HTHLT7097U8Y5b8=" crossorigin="anonymous"></script>

      

      
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/highlight.min.js" integrity="sha256-eOgo0OtLL4cdq7RdwRUiGKLX9XsIJ7nGhWEKbohmVAQ=" crossorigin="anonymous"></script>
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/languages/r.min.js"></script>
        
      

    

    
    

    
    
    <script>const code_highlighting = true;</script>
    

    
    
    <script>const isSiteThemeDark = false;</script>
    

    

    
    

    

    
    

    
    

    
    

    
    

    
    
    
    
    
    
    
    
    
    
    
    
    <script src="/PM566/js/academic.min.f30a8b5a880e824aab9653942c89109b.js"></script>

    






    
    
    <div class="container">
        <footer>
    <hr>

    <div class="row course-info">
        <div class="col-md-7">
            <p>
                <strong>PM566: Introduction to Health Data Science - PM 566 (Fall 2023)</strong><br>
            </p>
            <p>
                <a href="https://www.usc.edu/" target="_blank" rel="noopener">University of Southern California</a>
            </p>
            <p>
                <a href="https://pphs.usc.edu/" target="_blank" rel="noopener">Department of Population and Public Health Sciences</a>
            </p>
            <p>
                <a><i class="fas fa-user"></i>
                    Kelly Street</a>
            </p>
            <p>
                <a href="mailto:kelly.street@usc.edu"><i class="fas fa-envelope"></i>
                    kelly.street@usc.edu</a>
            </p>
        </div>

        <div class="col-md-5 credits">
            <p>All content licensed under a <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank" rel="noopener">Creative Commons Attribution-NonCommercial-NoDerivatives 4.0 International License</a>.</p>                    
            
            <p><a href="https://github.com/USCbiostats/PM566" target="_blank" rel="noopener"><i class="fab fa-github"></i> View the source at GitHub.</a></p>
        </div>
    </div>
</footer>

    </div>
    

    
<div id="modal" class="modal fade" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Cite</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <pre><code class="tex hljs"></code></pre>
      </div>
      <div class="modal-footer">
        <a class="btn btn-outline-primary my-1 js-copy-cite" href="#" target="_blank">
          <i class="fas fa-copy"></i> Copy
        </a>
        <a class="btn btn-outline-primary my-1 js-download-cite" href="#" target="_blank">
          <i class="fas fa-download"></i> Download
        </a>
        <div id="modal-error"></div>
      </div>
    </div>
  </div>
</div>

</body>

</html>
